<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Agenda</title>
    </h:head>   
    <h:body>
        <br/>        
        <h:form> 
              <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
            <p:commandButton value="Volver" action="Principal" immediate="true"/> 
            <p:panel header="Agenda">
             
                <h:panelGrid columns="4" cellpadding="3" >               
                    <p:outputLabel>Id</p:outputLabel>
                    <p:inputText id="tfIdAgenda"  value="#{AgendaBean.id}" />

                    <p:outputLabel for="mask" value="Fecha :" />
                    <p:calendar id="mask" value="#{AgendaBean.fecha}" pattern="dd-MM-yyyy"  />

               <p:outputLabel for="time" value="Hora:" />
               <p:calendar id="time" value="#{AgendaBean.hora}" pattern="HH:mm a" timeOnly="true"  />            
                    <p:outputLabel>Descripcion</p:outputLabel>
                    <p:inputText id="tfdescripcion"  value="#{AgendaBean.descripcion}" />
                    <p:outputLabel>Id Persona</p:outputLabel>
                    <p:selectOneMenu value="#{AgendaBean.personaId}" id="cbxPersona" style="width:75%">
                        <f:selectItems value="#{AgendaBean.afiliados}" var="p" itemValue="${p.cedula}" itemLabel="#{p.nombre}" />
                    </p:selectOneMenu>                    
                </h:panelGrid> 
                <p:row>
                    <p:commandButton value ="Insertar" action ="#{AgendaBean.crearAgenda()}" update="@form"/> 
                    <p:commandButton value ="Buscar" action ="#{AgendaBean.buscarAgenda()}" update="@form"/> 
                    <p:commandButton value ="Actualizar" action ="#{AgendaBean.editarAgenda()}" update="@form"/> 
                    <p:commandButton value ="Eliminar" action ="#{AgendaBean.eliminarAgenda()}" update="@form"/>           
                </p:row>   
            </p:panel>
            
            
            
             <p:dataTable  var="ag" value="#{AgendaBean.agendas}">
                <p:column headerText="id">
                    <h:outputText value="#{ag.id}" />
                </p:column>

                <p:column headerText="Descripcion">
                    <h:outputText value="#{ag.descripcion}" />      
                </p:column>
                 
                   <p:column headerText="Fecha ">
                       <h:outputText value="#{ag.fecha}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                       
                </p:column>
                 
                   <p:column headerText="Hora">
                       <h:outputText value="#{ag.fecha}">
                     <f:convertDateTime pattern="HH:mm a" />
                    </h:outputText>
                </p:column>


                <p:column headerText="Persona">
                    <h:outputText value="#{ag.persona.nombre}" />    

                </p:column>






            </p:dataTable>
        </h:form> 
    </h:body>
</html>
